<!DOCTYPE html>
<html>
    <head>
        <%- include("./head.ejs") %>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="/js/now.js"></script>
        <script>      
            function add(char){
                var display = document.getElementById('display');
                display.value += char; 
            }
            function reset(){
                document.getElementById('display').value = "";
            }            
        </script>
        <style>
            #display{
                width : 50px;
            }
            .wrapper {
                height:12rem;
                width:20rem;
                background-color: rgb(68,84,106);
            }   
            .wrapper1{
                height:2rem;
                width:19rem;
                border:0.1em solid white;
            }
        </style>
    </head>
    
    <body style="background-color: rgb(34, 42, 53);">
        <!-- 시작/종료 버튼 -->
        <button type="button" class="btn btn-primary" style="position: absolute; top: 30rem; left:28rem; width: 100px;" onclick="start()">START</button>
        <button type="button" class="btn btn-danger" style="position: absolute; top: 33rem; left:28rem; width: 100px;" onclick="stop()">비상정지</button>

        <!-- 조건 테이블 -->
            <table id="condition-value" class="table table-bordered" style="position:absolute; margin-top: 0.5em; margin-left:7em; width:20em; line-height: 1em; background-color: rgb(68,84,106); color:white; font-weight: 500;">
                <thead>
                    <tr>
                        <td colspan="4"><b>조건값</b></td>
                    </tr>
                    <tr>
                        <th></th>
                        <th>최적값</th>
                        <th>입력값</th>
                        <th>현재값</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><b>금형온도</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_mold_temp">
                            <% if(monitor){%>
                                <%= monitor.mold_temp%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>용융온도</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_melt_temp">
                            <% if(monitor){%>
                                <%= monitor.melt_temp%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>사출속도</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_injection_speed">
                            <% if(monitor){%>
                                <%= monitor.injection_speed%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>보압</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_hold_pressure">
                            <% if(monitor){%>
                                <%= monitor.hold_pressure%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>사출시간</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_injection_time">
                            <% if(monitor){%>
                                <%= monitor.injection_time%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>보압시간</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_hold_time">
                            <% if(monitor){%>
                                <%= monitor.hold_time%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>배압시간</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_filling_time">
                            <% if(monitor){%>
                                <%= monitor.filling_time%>
                            <% } %>
                        </td>
                    </tr>
                    <tr>
                        <td><b>총시간</b></td>
                        <td>3</td>
                        <td><input type=text id="display"></td>
                        <td id="now_cycle_time">
                            <% if(monitor){%>
                                <%= monitor.cycle_time%>
                            <% } %>
                        </td>
                    </tr>
                </tbody>
            </table>
        
        <!-- 자판 
        <table class="table table-bordered" style="border-color: black; position:absolute; margin-left:360px; margin-top:340px; table-layout: fixed; width:120px">
            <tr>
                <td onclick="add(1)">1</td>
                <td onclick="add(2)">2</td>
                <td onclick="add(3)">3</td>
            </tr>
            <tr>
                <td onclick="add(4)">4</td>
                <td onclick="add(5)">5</td>
                <td onclick="add(6)">6</td>
            </tr>
            <tr>
                <td onclick="add(7)">7</td>
                <td onclick="add(8)">8</td>
                <td onclick="add(9)">9</td>
            </tr>
            <tr>
                <td onclick="add(0)">0</td>
                <td onclick="add('.')">.</td>
                <td onclick="reset()">AC</td>
            </tr>
            <tr>
                <td colspan="3">OK</td>
            </tr>
        </table>-->

        <!-- 불량율 도넛그래프 -->
        
        <div class="wrapper" style="position: absolute; margin-top: 0.5em; right:4em;">
            <div class="wrapper1" style="position:absolute; top:0.3em; left:0.5em"></div>
            <div style="position:absolute; width:50%; left:25%;">
                <canvas id="myChart"></canvas>
            </div>
        </div>

        <script>
            const DATA_COUNT = 5;
            const NUMBER_CFG = {count: DATA_COUNT, min: 0, max: 100};

            const data = {
                labels: ['양품', '불량품'],
                datasets: [
                    {
                        label: 'Dataset 1',
                        data: [90, 10],
                        backgroundColor: ['royalblue', 'orangered'],
                        hoverOffset: 5
                    }
                ]
            };
            const config = {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true
                },
            };
            var myChart = new Chart(
                document.getElementById('myChart'),
                config
            );
            var show = true
        </script>

        <!-- 생산현황 그래프 -->
        <div class="wrapper" style="position: absolute; margin-top: 0.5em; right:25em;">
            <div class="wrapper1" style="position:absolute; top:0.3em; left:0.5em"></div>
            <div style="width:100%;">
                <canvas id="Chart1"></canvas>
            </div>
        </div>

        <script>
            const labels1 = [
                '시간1',
                '시간2', 
                '시간3',
                '시간4'              
            ];          
           
            const data1 = {
                labels: labels1,
                datasets: [
                    {
                    label: '목표생산량',
                    data: [100, 100, 100, 100],
                    borderColor: 'rgb(237, 125, 49)',
                    backgroundColor: 'rgb(237, 125, 49)',
                    },
                    {
                    label: '생산량',
                    data: [13,25,57,78],
                    borderColor: 'rgb(91, 155, 213)',
                    backgroundColor: 'rgb(91, 155, 213)',
                    }
                ]
            };
            const config1 = {
                type: 'line',
                data: data1,
                options: {
                    responsive: false,
                    plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: '현황확인1'
                    }
                    },
                    scales: {
                        y: {
                            min: 0,
                            max: 105,
                        }
                    }        
                },
            };
            var myChart1 = new Chart(
                document.getElementById('Chart1'),
                config1
            );
            var show = true
        </script>
        
        <!-- 온도조건 차트 -->
        <div class="wrapper" style="position: absolute; margin-top: 13em; right:4em;">
            <div class="wrapper1" style="position:absolute; top:0.3em; left:0.5em"></div>
            <div style="width:100%;">
                <canvas id="Chart2"></canvas>
            </div>
        </div>
        <script>
            const labels2 = [
                '시간1',
                '시간2',
                '시간3',
                '시간4',
            ];
            const data2 = {
            labels: labels2,
            datasets: [
                {
                label: '금형온도',
                data: [4.3, 2.5, 3.5, 4.5],
                borderColor: 'rgb(91, 155, 213)',
                backgroundColor: 'rgb(91, 155, 213)',
                },
                {
                label: '용융온도',
                data: [2.4, 4.4, 1.8, 2.8],
                borderColor: 'rgb(237, 125, 49)',
                backgroundColor: 'rgb(237, 125, 49)',
                }
            ]
            };
            const config2 = {
            type: 'line',
            data: data2,
            options: {
                responsive: false,
                plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: '현황확인2'
                }
                },
                scales: {
                    y: {
                        min: 0,
                        max: 7,
                    }
                }      
            },
            };
            var myChart2 = new Chart(
                document.getElementById('Chart2'),
                config2
            );
            var show = true
        </script>

        <!-- 압력조건 라인차트 -->
        <div class="wrapper" style="position: absolute; margin-top: 13em; right:25em;">
            <div class="wrapper1" style="position:absolute; top:0.3em; left:0.5em;"></div>
            <div style="width:100%;">
                <canvas id="Chart3"></canvas>
            </div>
        </div>
        <script>
            const labels3 = [
                '시간1',
                '시간2',
                '시간3',
                '시간4'              
            ];
            const data3 = {
            labels: labels3,
            datasets: [
                {
                label: '보압',
                data: [4.3, 2.3, 3.5, 4.5],
                borderColor: 'rgb(91, 155, 213)',
                backgroundColor: 'rgb(91, 155, 213)',
                },
                {
                label: '배압',
                data: [2.4, 4.4, 1.8, 2.8],
                borderColor: 'rgb(237, 125, 49)',
                backgroundColor: 'rgb(237, 125, 49)',
                }
            ]
            };
            const config3 = {
            type: 'line',
            data: data3,
            options: {
                responsive: false,
                plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: '현황확인3'
                }
                },
                scales: {
                    y: {
                        min: 0,
                        max: 5,
                    }
                }
            },
            };
            var myChart3 = new Chart(
                document.getElementById('Chart3'),
                config3
            );
            var show = true
        </script>
        
        <!-- 진행 단계 -->
        <div class="wrapper" style="width: 41rem; position: absolute; margin-top: 25.5em; right:4em; color:white; font-weight: 1000;">
            <div class="wrapper1" style="width:98%; position:absolute; top:0.3em; left:1%;"></div>
            <div id="osj2-container">
                <div align="center" id="osj2-spinner" style="position: fixed; margin-top: 90px; margin-left: 4rem; line-height: 60px; font-size: 20px;">준비</div>
            </div>
            <div id="osj2-container">
                <div align="center" id="osj2-spinner" style="position: fixed; margin-top: 90px; margin-left: 11rem; line-height: 60px; font-size: 20px;">사출</div>
            </div>
            <div id="osj2-container">
                <div align="center" id="osj2-spinner" style="position: fixed; margin-top: 90px; margin-left: 18rem; line-height: 60px; font-size: 20px;">배압</div>
            </div>
            <div id="osj2-container">
                <div align="center" id="osj2-spinner" style="position: fixed; margin-top: 90px; margin-left: 25rem; line-height: 60px; font-size: 20px;">보압</div>
            </div>
            <div id="osj2-container">
                <div align="center" id="osj2-spinner" style="position: fixed; margin-top: 90px; margin-left: 32rem; line-height: 60px; font-size: 20px;">분리</div>
            </div>
        </div>

        <div style="padding-top: 27rem;; margin-left:7em;">
            <img style="width: 20rem; height:10rem" src="/img/11.gif">
        </div>
    </body>
</html>