<!DOCTYPE html>
<html>
    <head>
        <%- include("./head.ejs") %>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="/js/now.js"></script>
        <style>
            .wrapper {
                height:35vh;
                width:28vw;
                background-color: rgba(199, 202, 241, 0.308);
            }   
            .wrapper1{
                height:4.5vh;
                width:27.4vw;
                background-color: rgba(161, 160, 175, 0.637);
            }
            .wrapper2{
                height:29vh;
                width:27.4vw;
                background-color: rgba(53, 54, 68, 0.637); 
            }
            td{
                vertical-align: middle;
                height : 2vh;
            }
            #keyboard{
                display: none;
                background-color: rgb(68,84,106);
                color: white; 
                position:absolute; 
                left:500px; 
                top:200px; 
                table-layout: fixed; 
                width:120px;
            }
            .btn{
                width:6.5rem; 
                height:2.5rem; 
                position:absolute; 
                bottom:0.3rem; 
                line-height: 1em;
            }
            #main_icon{
                background-color: var(--first-color);
            }
        </style>
    </head>
    
    <body style="background-color: rgb(70, 79, 99); overflow-y: hidden;">

        <!-- 조건 테이블 -->
        <%- include("./table.ejs") %> 
        
        <!-- 자판  -->
        <table class="table table-bordered " id="keyboard">
            <tr>
                <td onclick="add(1)">1</td>
                <td onclick="add(2)">2</td>
                <td onclick="add(3)">3</td>
            </tr>
            <tr>
                <td onclick="add(4)">4</td>
                <td onclick="add(5)">5</td>
                <td onclick="add(6)">6</td>
            </tr>
            <tr>
                <td onclick="add(7)">7</td>
                <td onclick="add(8)">8</td>
                <td onclick="add(9)">9</td>
            </tr>
            <tr>
                <td onclick="reset()">AC</td>
                <td onclick="add(0)">0</td>
                <td onclick="add('.')">.</td>
            </tr>
            <tr>
                <td colspan="2" id="ok">OK</td>
                <td onclick="del()">←</td>
            </tr>
        </table>        
        <%- include("./chart.ejs") %>
        
        <!-- 진행 단계 -->
        <div style="width: 57vw; height: 26vh; background-color: rgba(199, 202, 241, 0.308); position: absolute; top: 73vh; right:3vw; color:white; font-weight: 1000;">
            <div class="wrapper1" style="width:56.4vw; position:absolute; top:0.5vh; left:0.3vw;text-align: center; color:white; line-height: 4.5vh;"><b>현재 진행 상태</b></div>
                <div style="height:20vh; width:56.4vw; background-color: rgba(53, 54, 68, 0.637); position:absolute; top:5.5vh; left:0.3vw;">    
                    <div id="osj2-container" style="position: absolute; top:19%; left: 3%;">
                        <div align="center" id="osj2-spinner" style="line-height: 60px; font-size: 20px;">준비</div>
                    </div>
                    <div id="osj2-container" style="position: absolute; top:19%; left:20%">
                        <div align="center" id="osj2-spinner" style="line-height: 60px; font-size: 20px;">사출</div>
                    </div>
                    <div id="osj2-container" style="position: absolute; top:19%; left:37%;">
                        <div align="center" id="osj2-spinner" style="line-height: 60px; font-size: 20px;">배압</div>
                    </div>
                    <div id="osj2-container" style="position: absolute; top:19%; left:54%;">
                        <div align="center" id="osj2-spinner" style="line-height: 60px; font-size: 20px;">보압</div>
                    </div>
                    <div id="osj2-container" style="position: absolute; top:19%; left:71%;">
                        <div align="center" id="osj2-spinner" style="line-height: 60px; font-size: 20px;">분리</div>
                    </div>
                    <!-- 시작/종료 버튼 -->
                    <button type="button" class="btn btn-danger" style="position: absolute; right:2vw; top:33%; font-size:1.2em;" onclick="stop()">
                        <b>비상정지</b>
                    </button>
                </div>
        </div>

        <script>
            $(function(){
                if ("<%=linkcode%>"==0){
                    $("#linkcode").text("관리자")
                }else{
                    $("#linkcode").text("작업자")
                }
            })
            var set = "";
            function clicked(c){
                set = c;
            }
            function add(char){
                $(set).append(char)
            }
            function reset(){
                $(set).text("")
            }
            function del(){
                var c = document.getElementById(set.slice(1)).innerText
                $(set).text(c.slice(0,-1))
            }
            $(".display").click(function(e){
                $("#keyboard").css("left", e.pageX+"px")
                $("#keyboard").css("top", e.pageY+"px")
                $("#keyboard").show()
            })
            $("#ok").click(function(){
                $("#keyboard").hide()
            })
        </script>
    </body>
</html>